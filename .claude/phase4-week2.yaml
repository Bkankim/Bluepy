phase:
  name: "Phase 4 Week 2 - Windows 규칙 40개 추가"
  id: "phase-4-week-2"
  duration: "5일"
  status: "준비 중"
  progress: 0%
  start_date: "2025-10-20"

  objectives:
    - "Windows 규칙 40개 추가 (W-11 ~ W-50)"
    - "Validator 함수 40개 구현"
    - "YAML 파일 40개 작성"
    - "카테고리 확장 (레지스트리, 서비스, 패치)"
    - "코드 품질 검증 (Black, Ruff, 테스트)"

  deliverables:
    - type: "규칙 YAML"
      count: 40
      files: "config/rules/windows/W-11.yaml ~ W-50.yaml"
      categories:
        registry: 20  # W-11 ~ W-30
        service: 10   # W-31 ~ W-40
        patch: 5      # W-41 ~ W-45
        log: 5        # W-46 ~ W-50

    - type: "Validator 함수"
      count: 40
      files:
        - "src/core/analyzer/validators/windows/registry.py"
        - "src/core/analyzer/validators/windows/service_management.py"
        - "src/core/analyzer/validators/windows/patch_management.py"
        - "src/core/analyzer/validators/windows/log_management.py"
      lines: ~1500

    - type: "테스트"
      files: "tests/unit/test_windows_validators.py"
      tests: ~50
      lines: ~800

    - type: "문서"
      files:
        - "docs/WINDOWS_RULES.md"
        - "CLAUDE.md"
        - "PROJECT_PLAN.md"

  success_criteria:
    - name: "Windows 50개 규칙 완성"
      target: 50
      current: 10
      progress: 20%

    - name: "Validator 함수 동작 검증"
      checks:
        - "Python 구문 검증 100%"
        - "Import 테스트 통과"
        - "기본 호출 테스트 통과"

    - name: "코드 품질"
      checks:
        - "Black 포맷팅 통과"
        - "Ruff 린팅 0개 에러"
        - "Docstring 100% 작성"

    - name: "문서화 완료"
      checks:
        - "모든 규칙 YAML 문서화"
        - "카테고리별 설명 추가"
        - "PROJECT_PLAN.md 업데이트"

  tasks:
    day1:
      name: "Day 1 - 레지스트리 규칙 10개 (W-11 ~ W-20)"
      duration: "1일"

      subtasks:
        - id: "1.1"
          name: "Windows 레지스트리 보안 규칙 조사"
          type: "research"
          agent: "Explore"
          output: "CIS Benchmark 레지스트리 섹션 분석"

        - id: "1.2"
          name: "YAML 파일 10개 작성 (W-11 ~ W-20)"
          type: "implementation"
          files: "config/rules/windows/W-11.yaml ~ W-20.yaml"

        - id: "1.3"
          name: "Validator 함수 10개 구현"
          type: "implementation"
          files: "src/core/analyzer/validators/windows/registry.py"
          functions:
            - "check_w11 ~ check_w20"

        - id: "1.4"
          name: "코드 품질 검증"
          type: "quality"
          checks:
            - "Black 포맷팅"
            - "Ruff 린팅"
            - "Python 구문 검증"

        - id: "1.5"
          name: "Git 커밋"
          type: "commit"
          message: "feat: Phase 4 Week 2 Day 1 - 레지스트리 규칙 10개 추가"

    day2:
      name: "Day 2 - 레지스트리 규칙 10개 (W-21 ~ W-30)"
      duration: "1일"

      subtasks:
        - id: "2.1"
          name: "YAML 파일 10개 작성 (W-21 ~ W-30)"
          type: "implementation"

        - id: "2.2"
          name: "Validator 함수 10개 구현"
          type: "implementation"

        - id: "2.3"
          name: "코드 품질 검증 + Git 커밋"
          type: "quality"

    day3:
      name: "Day 3 - 서비스 관리 규칙 10개 (W-31 ~ W-40)"
      duration: "1일"

      subtasks:
        - id: "3.1"
          name: "Windows 서비스 보안 규칙 조사"
          type: "research"

        - id: "3.2"
          name: "YAML + Validator 10개 구현"
          type: "implementation"

        - id: "3.3"
          name: "코드 품질 검증 + Git 커밋"
          type: "quality"

    day4:
      name: "Day 4 - 패치 관리 5개 + 로그 관리 5개 (W-41 ~ W-50)"
      duration: "1일"

      subtasks:
        - id: "4.1"
          name: "패치 관리 규칙 조사 (Windows Update)"
          type: "research"

        - id: "4.2"
          name: "YAML + Validator 10개 구현 (W-41 ~ W-50)"
          type: "implementation"

        - id: "4.3"
          name: "코드 품질 검증 + Git 커밋"
          type: "quality"

    day5:
      name: "Day 5 - 통합 테스트 + 문서화"
      duration: "1일"

      subtasks:
        - id: "5.1"
          name: "전체 50개 규칙 검증"
          type: "testing"
          checks:
            - "모든 YAML 파일 파싱 테스트"
            - "모든 Validator 함수 import 테스트"
            - "기본 호출 테스트"

        - id: "5.2"
          name: "Windows 규칙 문서 작성"
          type: "documentation"
          files: "docs/WINDOWS_RULES.md"

        - id: "5.3"
          name: "프로젝트 문서 최신화"
          type: "documentation"
          files:
            - "CLAUDE.md"
            - "PROJECT_PLAN.md"

        - id: "5.4"
          name: "최종 커밋"
          type: "commit"
          message: "feat: Phase 4 Week 2 완료 - Windows 50개 규칙 완성"

  risks:
    - risk: "레지스트리 점검 명령어 복잡도"
      mitigation: "PowerShell Get-ItemProperty 패턴 재사용"
      severity: "low"

    - risk: "40개 규칙 작성 시간 부족"
      mitigation: "카테고리별 병렬 작업, 에이전트 활용"
      severity: "medium"

    - risk: "YAML 파일 형식 불일치"
      mitigation: "W-01~W-10 템플릿 재사용, 일관성 유지"
      severity: "low"

  metrics:
    target:
      rules: 50
      validators: 50
      tests: 50
      coverage: "61%"

    current:
      rules: 10
      validators: 10
      tests: 0
      coverage: "61%"
